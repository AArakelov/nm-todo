import{Aa as n,Ba as r,Ca as x,E as p,Fb as z,Ga as w,Ha as l,Ra as d,S as L,Sa as T,Ta as b,V as E,_a as F,aa as a,ab as y,cb as D,ka as C,kb as f,pa as c,pc as R,q as M,qb as k,sc as h,ta as s,tc as $,xa as m,ya as u,yb as N,za as v}from"./chunk-FZBD6FWI.js";var Z=e=>({urgent:e});function q(e,o){if(e&1&&d(0),e&2){let t=l();b(" ",t.timeLeft()," ")}}function G(e,o){if(e&1&&(d(0),y(1,"date")),e&2){let t=l();b(" ",D(1,1,t.todo.expirationDate,"mediumDate")," ")}}var P=class e{todo;timeLeft=E("");todoService=p(h);zone=p(L);intervalId;ngOnInit(){this.isToday()&&(this.updateTimeLeft(),this.zone.runOutsideAngular(()=>{this.intervalId=setInterval(()=>this.updateTimeLeft(),1e3)}))}isToday(){let o=new Date().toDateString(),t=new Date(this.todo.expirationDate).toDateString();return o===t}ngOnDestroy(){clearInterval(this.intervalId)}updateTimeLeft(){let o=new Date,t=new Date(this.todo.expirationDate);if(isNaN(t.getTime())){this.timeLeft.set("Invalid date");return}if(this.todo.expirationTime){let _=this.todo.expirationTime.trim().match(/^(\d{1,2}):(\d{2})\s?(AM|PM)$/i);if(_){let g=parseInt(_[1],10),U=parseInt(_[2],10),I=_[3].toUpperCase();I==="PM"&&g<12&&(g+=12),I==="AM"&&g===12&&(g=0),t.setHours(g,U,0,0)}else{this.timeLeft.set("Invalid time");return}}else t.setHours(23,59,59,999);let i=t.getTime()-o.getTime();if(i<=0){this.timeLeft.set("Expired");return}let O=Math.floor(i/1e3/60/60),j=Math.floor(i/1e3/60%60),B=Math.floor(i/1e3%60);this.timeLeft.set(`${O}h ${j}m ${B}s`)}onToggleFavorite(){this.todoService.toggleFavorite(this.todo.id).pipe(M(1)).subscribe()}onRemove(){this.todoService.removeTodo(this.todo.id).pipe(M(1)).subscribe()}isUrgent(){return this.timeLeft().includes("Expired")||this.timeLeft().startsWith("0h")}static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-todo-item"]],inputs:{todo:"todo"},decls:18,vars:12,consts:[[1,"todo-item"],[1,"row","title-row"],[1,"title"],[1,"row","meta-row"],[1,"meta"],[1,"meta","time",3,"ngClass"],[1,"actions"],["mat-icon-button","",3,"click","disabled"],["color","warn"],["mat-icon-button","",1,"delete-btn",3,"click","disabled"]],template:function(t,i){t&1&&(n(0,"div",0)(1,"div",1)(2,"span",2),d(3),r()(),n(4,"div",3)(5,"span",4),d(6),y(7,"date"),r(),n(8,"span",5),c(9,q,1,1)(10,G,2,4),r(),n(11,"span",6)(12,"button",7),w("click",function(){return i.onToggleFavorite()}),n(13,"mat-icon",8),d(14),r()(),n(15,"button",9),w("click",function(){return i.onRemove()}),n(16,"mat-icon"),d(17,"close"),r()()()()()),t&2&&(a(3),T(i.todo.title),a(3),T(D(7,7,i.todo.createdAt,"mediumDate")),a(2),s("ngClass",F(10,Z,i.isUrgent())),a(),m(i.isToday()?9:10),a(3),s("disabled",i.todoService.isLoading()),a(2),T(i.todo.isFavorite?"favorite":"favorite_border"),a(),s("disabled",i.todoService.isLoading()))},dependencies:[$,R,k,N],styles:[".todo-item[_ngcontent-%COMP%]{padding:1rem;border-bottom:1px solid #eee;background:#fff}.todo-item[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap}.todo-item[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]{margin-bottom:.5rem}.todo-item[_ngcontent-%COMP%]   .title-row[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.1rem;font-weight:600;color:#333;flex:1;word-break:break-word}.todo-item[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]{display:flex;gap:1rem;flex-wrap:wrap;font-size:.9rem;color:#666}.todo-item[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .meta[_ngcontent-%COMP%]{min-width:100px}.todo-item[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .time.urgent[_ngcontent-%COMP%]{color:red;font-weight:700}.todo-item[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{margin-left:auto;display:flex;gap:.5rem}.todo-item[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]   .delete-btn[_ngcontent-%COMP%]{border:1px solid red;color:red;border-radius:4px}@media (max-width: 600px){.todo-item[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.todo-item[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]{gap:.5rem}.todo-item[_ngcontent-%COMP%]   .meta-row[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{align-self:flex-end;margin-left:0}}"],changeDetection:0})};var S=(e,o)=>o.id;function J(e,o){if(e&1&&x(0,"app-todo-item",2),e&2){let t=o.$implicit;s("todo",t)}}function K(e,o){e&1&&(n(0,"div",3),d(1,"No favorite TODOs yet "),r())}function Q(e,o){if(e&1&&(n(0,"h2"),d(1,"Favorite TODOs"),r(),n(2,"div",1),u(3,J,1,1,"app-todo-item",2,S),c(5,K,2,0,"div",3),r()),e&2){let t=l();a(3),v(t.filteredTodos()),a(2),m(t.filteredTodos().length?-1:5)}}function V(e,o){if(e&1&&x(0,"app-todo-item",2),e&2){let t=o.$implicit;s("todo",t)}}function X(e,o){e&1&&(n(0,"div",3),d(1,"No TODOs for today "),r())}function Y(e,o){if(e&1&&x(0,"app-todo-item",2),e&2){let t=o.$implicit;s("todo",t)}}function tt(e,o){if(e&1&&(n(0,"div",1)(1,"h3"),d(2,"My Todo List"),r(),n(3,"div",4),u(4,Y,1,1,"app-todo-item",2,S),r()()),e&2){let t=l(2);a(4),v(t.otherTodos())}}function et(e,o){if(e&1&&(n(0,"div",1)(1,"h3"),d(2,"Today TODO's"),r(),n(3,"div",4),u(4,V,1,1,"app-todo-item",2,S),c(6,X,2,0,"div",3),r()(),c(7,tt,6,0,"div",1)),e&2){let t=l();a(4),v(t.todayTodos()),a(2),m(t.todayTodos().length?-1:6),a(),m(t.otherTodos().length?7:-1)}}var A=class e{filteredTodos=f(()=>{let o=this.todos();return this.isFavoriteRoute()?o.filter(t=>t.isFavorite):o});otherTodos=f(()=>{let o=new Date().toDateString();return this.filteredTodos().filter(t=>new Date(t.expirationDate).toDateString()!==o)});todayTodos=f(()=>{let o=new Date().toDateString();return this.filteredTodos().filter(t=>new Date(t.expirationDate).toDateString()===o)});todoService=p(h);todos=this.todoService.todos;router=p(z);isFavoriteRoute=f(()=>this.router.url.includes("favorite"));static \u0275fac=function(t){return new(t||e)};static \u0275cmp=C({type:e,selectors:[["app-page-todo-list"]],decls:3,vars:2,consts:[[1,"todo-list-container"],[1,"todo-section"],[3,"todo"],[1,"empty-state"],[1,"todo-items-container"]],template:function(t,i){t&1&&(n(0,"div",0),c(1,Q,6,1)(2,et,8,2),r()),t&2&&(a(),m(i.isFavoriteRoute()?1:-1),a(),m(i.isFavoriteRoute()?-1:2))},dependencies:[P],styles:[".todo-list-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem;padding:1.5rem;max-width:800px;margin:0 auto}.todo-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .todo-list-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#3f51b5;margin-bottom:1rem;font-weight:500;border-bottom:2px solid #e0e0e0;padding-bottom:.5rem}.todo-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.todo-list-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.4rem}.todo-section[_ngcontent-%COMP%]{background:#fff;border-radius:8px;box-shadow:0 2px 4px #00000014;padding:1.5rem;transition:box-shadow .3s ease}.todo-section[_ngcontent-%COMP%]:hover{box-shadow:0 4px 8px #0000001f}.todo-items-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:1rem}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#757575;padding:2rem;font-style:italic}@media (max-width: 600px){.todo-list-container[_ngcontent-%COMP%]{padding:1rem;gap:1.5rem}.todo-list-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.5rem}.todo-list-container[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.2rem}.todo-section[_ngcontent-%COMP%]{padding:1rem}}"],changeDetection:0})};export{A as PageTodoListComponent};
